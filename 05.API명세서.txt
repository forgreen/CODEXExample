문서 유형: API 명세서
API 식별자: A00001
API 명칭: 데이터셋 분할 API (SplitDataModule 기능)
관련 클래스: SplitDataModule
연동 방식: 내부 모듈 호출 또는 파이프라인 구성 요소 (B7D12-F0001-C00001-M00002-A00001) 개요:
데이터셋 분할 API는 주어진 데이터셋을 학습용과 테스트용으로 나누는 기능을 외부에 제공한다. 이 API는 SplitDataModule 클래스의 분할 기능을 캡슐화하여 사용자가 쉽게 데이터 분할 작업을 수행할 수 있도록 한다. 주로 머신러닝 워크플로우나 데이터 처리 파이프라인 내에서 모듈 형태로 호출되며, 필요한 매개변수를 설정하여 호출하면 두 개의 출력 데이터셋을 반환한다. 이 API는 하나의 데이터셋을 입력으로 받아 두 개의 데이터셋을 출력하며, 분할 방법은 파라미터에 따라 유연하게 결정된다. 요청 형식:
입력 데이터셋: 분할 대상이 되는 데이터셋을 제공한다. 일반적으로 테이블 형태(CSV, Pandas DataFrame 등)로된 데이터이며, 최소 두 개 이상의 데이터 레코드를 포함해야 한다.
분할 파라미터: 분할 동작을 지정하는 여러 파라미터들을 함께 전달해야 한다. 이는 SplitDataModule의 설정 값과 동일하며, 주요 파라미터는 다음과 같다:
mode (splitting_mode): 분할 방식 선택. "rows" (행 분할), "regex" (정규식), "expression" (조건식), "recommender" (추천) 등의 문자열로 지정한다.
fraction: 행 분할 모드일 때 첫 번째 출력으로 가져갈 비율(0~1 사이 실수 또는 백분율 문자열). 예: 0.7 또는 "70%".
randomize: (행 분할용) 무작위 분할 여부 (불리언).
random_seed: (선택 사항) 무작위 분할 시드 값 (정수).
stratified 및 stratify_key: (선택 사항) 층화 분할 사용 여부와 기준 열 이름.
target_column 및 regex: 정규식 분할 모드일 때 대상 열 이름과 정규 표현식 패턴.
expression: 조건식 분할 모드일 때 사용되는 조건 표현식 문자열.
(추천 분할 모드의 추가 설정은 기본값으로 내장되어 있어 일반적으로 별도 지정 없이 동작하며, 고급 사용자는 별도의 설정 인터페이스를 통해 조정 가능)
이들 파라미터는 API 호출 시 구성 객체나 JSON 형식 등으로 전달될 수 있다. 예를 들어 JSON으로 요청하는 경우:
json
복사
편집
{
  "dataset": "<데이터셋 경로 또는 객체>",
  "mode": "rows",
  "fraction": 0.75,
  "randomize": true,
  "random_seed": 42,
  "stratified": false
}
와 같이 지정할 수 있다. (정규식 모드나 조건식 모드의 경우 해당하는 키-값 쌍인 target_column/regex 또는 expression을 포함해야 한다.) 응답 형식:
출력 데이터셋 1: 분할된 첫 번째 데이터셋 (주로 훈련용). 원본 데이터 중 조건에 맞는 또는 앞부분 비율만큼의 데이터가 포함된다. 예를 들어 1000개의 레코드 중 75% 분할이면 약 750개의 행이 이 데이터셋에 포함된다.
출력 데이터셋 2: 분할된 두 번째 데이터셋 (주로 테스트용). 원본 데이터에서 첫 번째 출력에 포함되지 않은 나머지 데이터로 구성된다 (위 예에서는 약 250개의 행).
응답은 두 출력 데이터셋을 동시에 반환하며, 호출 환경에 따라 다양한 방식으로 제공된다: 예를 들어 함수 호출이라면 두 객체를 반환하고, REST API 형태라면 출력 데이터셋들의 경로나 ID를 JSON 응답으로 제공할 수 있다. 사용 예시:
행 분할 모드 사용 – 80:20으로 훈련/테스트 분할:
요청: mode="rows", fraction=0.8, randomize=True, random_seed=2025 (입력 데이터셋 포함)
결과: 출력 데이터셋1에 원본의 약 80% 행이 랜덤 선택되어 담기고, 출력 데이터셋2에 나머지 20%가 담긴다. 두 출력 모두 원본과 동일한 열을 가진다.
정규식 분할 모드 사용 – 특정 키워드가 들어간 레코드 필터링:
요청: mode="regex", target_column="ReviewText", regex="great"
결과: 출력 데이터셋1에는 ReviewText 열에 "great"이라는 패턴이 포함된 행들이 모두 담기고, 출력 데이터셋2에는 그 외 행들이 담긴다.
조건식 분할 모드 사용 – 수치 조건에 따른 이분할:
요청: mode="expression", expression="Price > 100"
결과: 출력 데이터셋1에는 Price 값이 100을 초과하는 행들이, 출력 데이터셋2에는 Price 값이 100 이하인 행들이 들어간다.
추천 분할 모드 사용 – 추천 시스템 학습용 데이터 분리:
요청: mode="recommender" (입력 데이터셋은 user-item-rating 3열 구조)
결과: 출력 데이터셋1에는 대부분의 사용자-아이템-평점 데이터가, 출력 데이터셋2에는 추천 평가를 위해 홀드아웃된 일부 데이터가 들어간다. (각 사용자와 아이템이 훈련 세트에도 어느 정도 포함되도록 자동 조정됨)
오류 및 예외 처리:
요청 시 제공된 매개변수 또는 데이터셋이 유효하지 않을 경우, API는 오류 응답을 반환한다. 예를 들어, 데이터셋에 데이터가 부족하거나 (dataset에 한 행만 있는 경우 등), mode에 잘못된 값이 들어온 경우, 혹은 필요한 파라미터가 누락된 경우 등이 이에 해당한다. 오류가 발생하면 응답으로 오류 메시지와 오류 코드를 전달하며, 어떤 상황에서 어떤 오류가 발생하는지는 예외 정의서에 상세히 정의되어 있다. 호출자는 응답의 오류 정보를 확인하여 잘못된 파라미터를 수정하거나 데이터 조건을 충족시킨 후 재시도해야 한다. 참고: 본 API는 내부적으로 SplitDataModule 클래스를 사용하여 구현되었으며, 동작에 대한 자세한 사항은 해당 클래스의 함수 정의서를 참고할 수 있다. API 사용자는 내부 구현을 몰라도 제공된 파라미터를 통해 동일한 기능을 활용할 수 있도록 추상화되어 있다.